#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>

int main(int argc, char **argv) {

	char out0[] = {'m', 'e'};

	// out1 contains a complete RTCM message plus others. (1)
	char out1[] = {'s', 's', 'a', 'g', 'e', '\n',
		'm', 'e', 's', 's', 'a', 'g', 'e', '\n',
		0xd3, 0x00, 0x37, 0x46, 0x40, 0x00, 0x48, 0xd2, 0x65, 0x22,
		0x00, 0x00, 0x00, 0x20, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x20, 0x00, 0x00, 0x00, 0x7c, 0x1a, 0x8a, 0x72, 0x53, 0xeb,
		0xe8, 0x55, 0xe2, 0xdf, 0x27, 0x5d, 0xba, 0xbc, 0xe3, 0x43,
		0x1b, 0x7c, 0x81, 0xe9, 0xec, 0x32, 0x0f, 0xce, 0x80, 0x60,
		0x62, 0x47, 0xff, 0xff, 0x85, 0x16, 0xe1, 0xa0, 0x2e, 0x7b,
		0xae, 'm', 'e'};

	// out2 contains no RTCM messages.
	char out2[] = {'m', 'e', 's', 's', 'a', 'g', 'e', '\n',
		'm', 'e', 's', 's', 'a', 'g', 'e', '\n'};

	// out3 starts an RTCM message which is completed in out4. (2)
	char out3[] = {'t', 'h', 'i', 's', ' ', 'i', 's', ' ', 't', 'h', 'e', '\n',
			's',  't', 'a', 'r', 't', ' ', 'o', 'f', ' ', 'a', ' ',
			'l', 'o', 'n', 'g', ' ', 'm', 'e', 's', 's', 'a', 'g', 'e', '\n',
		0xD3, 0x00, 0x13, 0x3E, 0xD7, 0xD3, 0x02, 0x02, 0x98, 0x0E,
		0xDE, 0xEF, 0x34, 0xB4, 0xBD};

	char out4[] = {0x62, 0xAC, 0x09, 0x41, 0x98,
		0x6F, 0x33, 0x36, 0x0B, 0x98,
		'm', 'e', 's', 's', 'a', 'g', 'e', '\n'};

	// out5 contains just non-RTCM messages.
	char out5[] = {'c', 'o', 'm', 'p', 'l', 'e', 't', 'e', ' ',
		'm', 'e', 's', 's', 'a', 'g', 'e', ' ',
		'f', 'o', 'l', 'l', 'o', 'w', 's', '\n'};

	// out6 contains exactly one message, an RTCM. (3)
	char out6[] = {0xD3, 0x00, 0x13, 0x3E, 0xD7, 0xD3, 0x02, 0x02, 0x98, 0x0E,
		0xDE, 0xEF, 0x34, 0xB4, 0xBD, 0x62, 0xAC, 0x09, 0x41, 0x98,
		0x6F, 0x33, 0x36, 0x0B, 0x98};

	// Edge case: out7 starts an RTCM message but the length value is incomplete.
	// The complete message spans two buffers. (4)
	char out7[] = {'e', 'd', 'g', 'e', ' ', 'c', 'a', 's', 'e', ':', ' ',
		'n',  'o', ' ', 'l', 'e', 'n', 'g', 't', 'h', ' ', 'y', 'e', 't', '\n',
		0xD3, 0x00};

	char out8[] = {0x13, 0x3E, 0xD7, 0xD3, 0x02, 0x02, 0x98, 0x0E};

	char out9[] = {
		0xDE, 0xEF, 0x34, 0xB4, 0xBD, 0x62, 0xAC, 0x09, 0x41, 0x98,
		0x6F, 0x33, 0x36, 0x0B, 0x98,
		'm', 'e', 's', 's', 'a', 'g', 'e', '\n',
		'm', 'e', 's', 's', 'a', 'g', 'e', '\n'};

	// out10 starts an RTCM message which is completed in out11.
	char out10[] = {'m', 'e', 's', 's', 'a', 'g', 'e', '\n',
		0xD3, 0x00};

	// out11 completes the RTCM message started in out10. (5)
	char out11[] = {0x13, 0x3E, 0xD7, 0xD3, 0x02, 0x02, 0x98, 0x0E,
		0xDE, 0xEF, 0x34, 0xB4, 0xBD, 0x62, 0xAC, 0x09, 0x41, 0x98,
		0x6F, 0x33, 0x36, 0x0B, 0x98};

	// out2 contains just non-RTCM messages.
	char out12[] = {'i', 'l', 'l', 'e', 'g', 'a', 'l', ' ',
		'm', 'e', 's', 's', 'a', 'g', 'e', ' ',
		'f', 'o', 'l', 'l', 'o', 'w', 's', '\n'};

	// out13 contains exactly one message, an RTCM, but one byte is missing,
	// which makes the CRC check fail.
	char out13[] = {
			0xd3, 0x00, 0x37, 0x46, 0x40, 0x00, 0x48, 0xd2, 0x65, 0x22,
			0x00, 0x00, 0x00, 0x20, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x20, 0x00, 0x00, 0x00, 0x7c, 0x1a, 0x8a, 0x72, 0x53, 0xeb,
			0xe8, 0x55, 0xe2, 0xdf, 0x27, 0x5d, 0xba, 0xbc, 0xe3, 0x43,
			0x1b, 0x7c, 0x81, 0xe9, 0xec, 0x32, 0x0f, 0xce, 0x80, 0x60,
			0x62, 0x47, 0xff, 0xff, 0x85, 0x16, 0xe1, 0xa0, 0x2e, 0x7b,
			0xae};

	// out14 contains just non-RTCM messages.
	char out14[] = {'l', 'e', 'g', 'a', 'l', ' ',
		'm', 'e', 's', 's', 'a', 'g', 'e', ' ',
		'f', 'o', 'l', 'l', 'o', 'w', 's', '\n'};

	// out15/16/17 contains an RTCM message.  The header is not complete until
	// the third buffer is read.  (6)
	char out15[] = {'t', 'h', 'r', 'e', 'e', ' ',
			'b', 'u', 'f', 'f', 'e', 'r', 's', '\n', 0xd3};

	char out16[] = {0x00};

	char out17[] = {0x37, 0x46, 0x40, 0x00, 0x48, 0xd2, 0x65, 0x22,
			0x00, 0x00, 0x00, 0x20, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x20, 0x00, 0x00, 0x00, 0x7c, 0x1a, 0x8a, 0x72, 0x53, 0xeb,
			0xe8, 0x55, 0xe2, 0xdf, 0x27, 0x5d, 0xba, 0xbc, 0xe3, 0x43,
			0x1b, 0x7c, 0x81, 0xe9, 0xec, 0x32, 0x0f, 0xce, 0x80, 0x60,
			0x62, 0x47, 0xff, 0xff, 0x85, 0x16, 0xe1, 0xa0, 0x2e, 0x7b,
			0xae};

	// out18 and 19 contain two RTCM messages with some other stuff. (7, 8)
	char out18[] = {'t', 'w', 'o', ' ',
			'm', 'e', 's', 's', 'a', 'g', 'e', 's', '\n',
			0xd3, 0x00, 0x37, 0x46, 0x40, 0x00, 0x48, 0xd2, 0x65, 0x22,
			0x00, 0x00, 0x00, 0x20, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x20, 0x00, 0x00, 0x00, 0x7c, 0x1a, 0x8a, 0x72, 0x53, 0xeb,
			0xe8, 0x55, 0xe2, 0xdf, 0x27, 0x5d, 0xba, 0xbc, 0xe3, 0x43,
			0x1b, 0x7c, 0x81, 0xe9, 0xec, 0x32, 0x0f, 0xce, 0x80, 0x60,
			0x62, 0x47, 0xff, 0xff, 0x85, 0x16, 0xe1, 0xa0, 0x2e, 0x7b,
			0xae, 'm', 'e', 's', 's', 'a', 'g', 'e', '\n',
			'm', 'e', 's', 's', 'a', 'g', 'e', '\n',
			0xd3, 0x00, 0x37, 0x46};

	char out19[] = {0x40, 0x00, 0x48, 0xd2, 0x65, 0x22,
			0x00, 0x00, 0x00, 0x20, 0x16, 0x00, 0x00, 0x00, 0x00, 0x00,
			0x20, 0x00, 0x00, 0x00, 0x7c, 0x1a, 0x8a, 0x72, 0x53, 0xeb,
			0xe8, 0x55, 0xe2, 0xdf, 0x27, 0x5d, 0xba, 0xbc, 0xe3, 0x43,
			0x1b, 0x7c, 0x81, 0xe9, 0xec, 0x32, 0x0f, 0xce, 0x80, 0x60,
			0x62, 0x47, 0xff, 0xff, 0x85, 0x16, 0xe1, 0xa0, 0x2e, 0x7b,
			0xae, 'm', 'e', 's', 's', 'a', 'g', 'e', '\n'};

	write(STDOUT_FILENO, out0, sizeof(out0)); sleep(1);
	write(STDOUT_FILENO, out1, sizeof(out1)); sleep(1);
	write(STDOUT_FILENO, out2, sizeof(out2)); sleep(1);
	write(STDOUT_FILENO, out3, sizeof(out3)); sleep(1);
	write(STDOUT_FILENO, out4, sizeof(out4)); sleep(1);
	write(STDOUT_FILENO, out5, sizeof(out5)); sleep(1);
	write(STDOUT_FILENO, out6, sizeof(out6)); sleep(1);
	write(STDOUT_FILENO, out7, sizeof(out7)); sleep(1);
	write(STDOUT_FILENO, out8, sizeof(out8)); sleep(1);
	write(STDOUT_FILENO, out9, sizeof(out9)); sleep(1);
	write(STDOUT_FILENO, out10, sizeof(out10)); sleep(1);
	write(STDOUT_FILENO, out11, sizeof(out11)); sleep(1);
	write(STDOUT_FILENO, out12, sizeof(out12)); sleep(1);
	write(STDOUT_FILENO, out13, sizeof(out13)); sleep(1);
	write(STDOUT_FILENO, out14, sizeof(out14)); sleep(1);
	write(STDOUT_FILENO, out15, sizeof(out15)); sleep(1);
	write(STDOUT_FILENO, out16, sizeof(out16)); sleep(1);
	write(STDOUT_FILENO, out17, sizeof(out17)); sleep(1);
	write(STDOUT_FILENO, out18, sizeof(out18)); sleep(1);
	write(STDOUT_FILENO, out19, sizeof(out19)); sleep(1);

	return 0;
}


